function initMap(){var e=new google.maps.Map(document.querySelector(".map"),{zoom:17,center:{lat:59.938717,lng:30.323047}});new google.maps.Marker({position:{lat:59.938717,lng:30.3238},map:e,icon:"img/map-marker.png"})}var contactForm=document.querySelector(".write-us"),popupButtonOpen=document.querySelector(".contacts-button"),popup=document.querySelector(".modal"),popupButtonClose=popup.querySelector(".modal-close"),nameField=popup.querySelector("[name=name]"),emailField=popup.querySelector("[name=email]"),contentField=popup.querySelector("[name=email-content]"),isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}popupButtonOpen.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-visible"),storageName&&(nameField.value=storageName,emailField.focus()),storageEmail&&(emailField.value=storageEmail,contentField.focus())}),popupButtonClose.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-visible"),popup.classList.remove("modal-error")}),contactForm.addEventListener("submit",function(e){nameField.value||nameField.classList.add("field-error"),emailField.value||emailField.classList.add("field-error"),contentField.value||contentField.classList.add("field-error"),nameField.value&&emailField.value&&contentField.value?(nameField.classList.remove("field-error"),emailField.classList.remove("field-error"),contentField.classList.remove("field-error"),isStorageSupport&&(localStorage.setItem("name",nameField.value),localStorage.setItem("email",emailField.value))):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-visible")&&(popup.classList.remove("modal-visible"),popup.classList.remove("modal-error")))});